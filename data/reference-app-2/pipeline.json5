{
  id: "part17",
  name: "Part 17 Pipeline 1",
  description: "",
  tasks: [
    {
      type: "com.example.dataprocessingexperiment.spark.pipeline.ValuesFilterProcessor",
      id: "city.1",
      name: "Value filter",
      description: "Remove rows where values match those specified",
      table: "cities",
      column: "city",
      values: ["England", "Scotland", "Wales", "Northern Ireland"],
      exclude: true
    },
    {
      type: "com.example.dataprocessingexperiment.spark.pipeline.RegExReplaceProcessor",
      id: "city.2",
      name: "Reg ex replace filter",
      description: "Remove * from city names",
      table: "cities",
      column: "city",
      regex: "[*#@]",
      replacement: "",
    },
    {
      type: "com.example.dataprocessingexperiment.app.part17.ValueContainsOneInListProcessor",
      id: "customers.3",
      name: "City Name",
      description: "Derive city name from address",
      factTable: "customers",
      factCol: "address",
      dimensionTable: "cities",
      dimensionCol: "city",
      other: "OTHER"
    },
    {
      type: "com.example.dataprocessingexperiment.app.part17.CityProcessor",
      id: "customers.3a",
      name: "City Name",
      description: "Handle HULL special case",
      factTable: "customers",
      targetDimension: "city",
      sourceDimension: "address",
    },
    {
      type: "com.example.dataprocessingexperiment.spark.pipeline.OutputProcessor",
      id: "customers.city.output",
      name: "Output customers with city",
      description: "Writes out the enriched customers",
      table: "customers",
      path: "./build/output/reference-app-2/transformed/city",
      format: "csv",
      mode: "overwrite",
      options: {
        "header": "true",
      }
      // TODO add partition capability
    },
    {
      type: "com.example.dataprocessingexperiment.spark.pipeline.AggregateSumProcessor",
      id: "customers.4",
      name: "City total",
      description: "Sum by city",
      table: "customers",
      sumColumn: "total_spend",
      groupColumn: "city",
      resultTable: "city_totals",
    },
    {
      type: "com.example.dataprocessingexperiment.spark.pipeline.OutputProcessor",
      id: "customers.output",
      name: "Output transformed customers",
      description: "Writes out the enriched customers",
      table: "city_totals",
      path: "./build/output/reference-app-2/transformed/city_totals",
      format: "csv",
      mode: "overwrite",
      options: {
        "header": "true",
      }
      // TODO add partition capability
    }

  ]
}
